# Домашняя работа №8 (к занятию от 08.09.23)
[Нагрузочное тестирование и тюнинг PostgreSQL]

- [x] Использую ранее созданный инстанс виртуальной машины "postgres2" с дефолтными параметрами в YC (ОС:Ubuntu 22.04, HDD 10Gb, RAM 4Gb);
- [x] Добавлен ssh ключ в metadata ВМ yc_key.pub;
- [x] Развернут кластер БД PostgreSQL 15;

`silunsky@postgres:~$ pg_lsclusters`

`Ver Cluster Port Status Owner    Data directory              Log file`

`15  main    5432 online postgres /var/lib/postgresql/15/main /var/log/postgresql/postgresql-15-main.log`

- [x] Настроим кластер PostgreSQL 15 на максимальную производительность не обращая внимание на возможные проблемы с надежностью в случае аварийной перезагрузки виртуальной машины.

|  РЕСУРСЫ ВИРТУАЛЬНОЙ МАШИНЫ YC                |
|------------------------------|----------------|
| Платформа                    | Intel Ice Lake |
| Гарантированная доля vCPU    | 50%            |
| vCPU                         | 2              |
| RAM                          | 4 ГБ           |
| Объём дискового пространства | 21 ГБ          |

`postgres@postgres2:~$ psql`

psql (15.4 (Ubuntu 15.4-1.pgdg22.04+1))

Type "help" for help.

`postgres=# show config_file;`

| config_file                              |               
|----------------------------------------- |
| /etc/postgresql/15/main/postgresql.conf  |
(1 row)

`postgres@postgres2:~$ free`

|           |total      |        used |        free |      shared |  buff/cache | available  |
|-----------------------|-------------|-------------|-------------|-------------|------------|
| Mem:      | 4004912   |      199780 |    3379852  |     28240   |   425280    | 3544160    |
| Swap:     | 0         |          0  |         0   |             |             |            |

`postgres@postgres2:~$ df -h`

| Filesystem     | Size | Used | Avail | Use% | Mounted on |
|----------------|------|------|-------|------|------------|
| /dev/vda2      | 9.8G | 4.7G | 4.7G  | 51%  | /          |
| /dev/vdb       |  11G | 694M | 9.5G  | 7%   | /mnt       |

- Для тюнинга производительности Кластера воспользуемся рекомендациями с сайта https://pgtune.leopard.in.ua



